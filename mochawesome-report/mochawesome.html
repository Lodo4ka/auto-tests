<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:1,&quot;tests&quot;:1,&quot;passes&quot;:1,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2018-08-16T15:52:14.849Z&quot;,&quot;end&quot;:&quot;2018-08-16T15:52:37.991Z&quot;,&quot;duration&quot;:23142,&quot;testsRegistered&quot;:1,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;86dd1667-93f7-4de7-87da-c5162dbf75ef&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;79502cc0-ad5b-4695-b688-97aa83f1be0a&quot;,&quot;title&quot;:&quot;written mocha data in technical calculations section&quot;,&quot;fullFile&quot;:&quot;/home/user/Рабочий стол/auto-tests/crm2/test/Scenario/API server/Technical calculation/Calculation.spec.js&quot;,&quot;file&quot;:&quot;/test/Scenario/API server/Technical calculation/Calculation.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook: ret&quot;,&quot;fullTitle&quot;:&quot;written mocha data in technical calculations section \&quot;before all\&quot; hook: ret&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1982,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;let result = await LoginBasic();\ndriver = result.driver;\ndefaultProxy = result.defaultProxy;\nconnection = result.connection;\nawait driver.get(calculationsUrl);\nawait driver\n  .manage()\n  .window()\n  .maximize();\ndone();&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;20d2e5a4-7f12-4604-8b71-6e0252516587&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook: ret&quot;,&quot;fullTitle&quot;:&quot;written mocha data in technical calculations section \&quot;after all\&quot; hook: ret&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3531,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await defaultProxy.closeProxies();\nawait defaultProxy.end();\nawait driver.close();\nawait driver.quit();\ndone();&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;62ab4a65-5c95-4693-82f9-bd9a897f0056&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;write moch data in calculations section and check HTTP POST query&quot;,&quot;fullTitle&quot;:&quot;written mocha data in technical calculations section write moch data in calculations section and check HTTP POST query&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17622,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await driver.executeScript(`\n  let form = document.querySelector(&#x27;form[action=\&quot;/calculations\&quot;]&#x27;);\n  form.submit();\n`);\nlet page = 0;\nlet pageInput = 0;\nlet pageIndex = 0;\nlet tabCount = 0;\nconst inputstextareaNumberLocated = await driver.wait(\n  until.elementsLocated(\n    By.css(\n      \&quot;#formCalculationInfo .col-sm-6 input[type=\\\&quot;number\\\&quot;], #formCalculationInfo .form-group textarea\&quot;\n    )\n  ),\n  TIMEOUT\n);\nconst tabsCalculations = await driver.wait(\n  until.elementsLocated(By.js(() =&gt; {\n    let newArray = [];\n    let nodeList =  document.querySelectorAll(\&quot;[data-toggle=\\\&quot;tab\\\&quot;]\&quot;);\n    nodeList.forEach(function(element) {\n      if(element.parentNode.style.display !== \&quot;none\&quot; &amp;&amp; !element.closest(\&quot;#divTabGlass\&quot;)) {\n        newArray.push(element);\n      }\n    });\n    return newArray;\n  })),\n  TIMEOUT\n);\n(async function() {\n  const inputsLocated = await driver.wait(\n    until.elementsLocated(\n      By.css(\n        \&quot;#formCalculationInfo .col-sm-6 input[type=\\\&quot;number\\\&quot;], #formCalculationInfo .form-group textarea\&quot;\n      )\n    ),\n    TIMEOUT\n  );\n  for (let i = 0; i &lt;= inputsLocated.length - 1; i++) {\n    await driver\n      .wait(until.elementIsVisible(inputstextareaNumberLocated[i]), TIMEOUT)\n      .then(bool =&gt; {\n        if (bool) {\n          pageIndex++;\n        }\n      });\n  }\n})();\n(async function() {\n  for (let i = 0; i &lt;= tabsCalculations.length; i++) {\n    tabCount = i;\n  }\n})();\nconst optionFormaLocated = await driver.wait(until.elementLocated(By.xpath(formaCompleteProduct)), TIMEOUT);\nconst optionFormaVisible = await driver.wait(until.elementIsVisible(optionFormaLocated), TIMEOUT);\nawait optionFormaVisible.click();\nfor (let i = 0; i &lt;= inputstextareaNumberLocated.length - 1; i++) {\n  await driver.wait(until.elementIsVisible(inputstextareaNumberLocated[i]), TIMEOUT);\n  await inputstextareaNumberLocated[i].getAttribute(\&quot;name\&quot;);\n  await inputstextareaNumberLocated[i].sendKeys(fakeData().number);\n  pageInput = i;\n  if (pageInput &gt;= pageIndex - 1) {\n    if (page &lt; tabCount - 1) {\n      await tabsCalculations[page + 1].click();\n      page++;\n    }\n  }\n}\nconst plusGlassLocated =\n  await driver.wait(until.elementLocated(By.css(plusGlass)), TIMEOUT);\nconst plusGlassVisible =\n  await driver.wait(until.elementIsVisible(plusGlassLocated), TIMEOUT);\nawait plusGlassVisible.click();\nconst glassOptionlocated =\n  await driver.wait(until.elementLocated(By.xpath(glassOption)), TIMEOUT);\nconst glassOptionVisible =\n  await driver.wait(until.elementIsVisible(glassOptionlocated), TIMEOUT);\nawait glassOptionVisible.click();\nawait driver.executeScript(`\n  let checkbox = document.querySelector(&#x27;input[name=\&quot;take\&quot;]&#x27;);\n  checkbox.click();\n`);\nconst addBtnLocated =\n  await driver.wait(until.elementLocated(By.css(buttonAddGlass)), TIMEOUT);\nconst addBtnVisible =\n  await driver.wait(until.elementIsVisible(addBtnLocated), TIMEOUT);\nawait addBtnVisible.click();\nconst triplexBtnLocated =\n  await driver.wait(until.elementLocated(By.xpath(triplexBtn)), TIMEOUT);\nconst triplexBtnVisible =\n  await driver.wait(until.elementIsVisible(triplexBtnLocated), TIMEOUT);\nawait triplexBtnVisible.click();\nconst nameInputLocated =\n  await driver.wait(until.elementLocated(By.xpath(nameInput)), TIMEOUT);\nconst nameInputVisible =\n  await driver.wait(until.elementIsVisible(nameInputLocated), TIMEOUT);\nawait nameInputVisible.sendKeys(fakeData().companyName);\nconst glass1OptionLocated =\n  await driver.wait(until.elementLocated(By.xpath(glass1Option)), TIMEOUT);\nconst glass1OptionVisible =\n  await driver.wait(until.elementIsVisible(glass1OptionLocated), TIMEOUT);\nawait glass1OptionVisible.click();\nconst plenka1OptionLocated =\n  await driver.wait(until.elementLocated(By.xpath(plenka1Option)), TIMEOUT);\nconst plenka1OptionVisible =\n  await driver.wait(until.elementIsVisible(plenka1OptionLocated), TIMEOUT);\nawait plenka1OptionVisible.click();\nconst glass2OptionLocated =\n  await driver.wait(until.elementLocated(By.xpath(glass2Option)), TIMEOUT);\nconst glass2OptionVisible =\n  await driver.wait(until.elementIsVisible(glass2OptionLocated), TIMEOUT);\nawait glass2OptionVisible.click();\nconst plenka2OptionLocated =\n  await driver.wait(until.elementLocated(By.xpath(plenka2Option)), TIMEOUT);\nconst plenka2OptionVisible =\n  await driver.wait(until.elementIsVisible(plenka2OptionLocated), TIMEOUT);\nawait plenka2OptionVisible.click();\nconst glass3OptionLocated =\n  await driver.wait(until.elementLocated(By.xpath(glass3Option)), TIMEOUT);\nconst glass3OptionVisible =\n  await driver.wait(until.elementIsVisible(glass3OptionLocated), TIMEOUT);\nawait glass3OptionVisible.click();\nconst buttonAddTriplexLocated =\n  await driver.wait(until.elementLocated(By.css(buttonAddTriplex)), TIMEOUT);\nconst buttonAddTriplexVisible =\n  await driver.wait(until.elementIsVisible(buttonAddTriplexLocated), TIMEOUT);\nawait buttonAddTriplexVisible.click();\nconst btnDeleteLocated =\n      await driver.wait(until.elementLocated(By.xpath(btnDeleteTriplex)), TIMEOUT);\nconst btnDelete =\n      await driver.wait(until.elementIsVisible(btnDeleteLocated), TIMEOUT);\nawait btnDelete.click();\nconst btnDeleteTriplexConfirmLocated =\n      await driver.wait(until.elementLocated(By.css(btnDeleteTriplexConfirm)), TIMEOUT);\nconst btnDeleteTriplexConfirmVisible =\n      await driver.wait(until.elementIsVisible(btnDeleteTriplexConfirmLocated), TIMEOUT);\nawait btnDeleteTriplexConfirmVisible.click();\nawait driver.executeScript(`\n  let btn = document.querySelector(\&quot;.btnDeleteGlass.btn.btn-danger2\&quot;);\n  btn.click();\n`);\nconst btnClimaGuardConfirmLocated =\n      await driver.wait(until.elementLocated(By.css(btnClimaGuardConfirm)), TIMEOUT);\nconst btnClimaGuardConfirmVisible =\n      await driver.wait(until.elementIsVisible(btnClimaGuardConfirmLocated), TIMEOUT);\nawait btnClimaGuardConfirmVisible.click();\nawait driver.executeScript(`\n  let select = document.querySelector(\&quot;#selectWindowsStructurals\&quot;);\n  let option = select[select.length - 1];\n  option.setAttribute(\&quot;selected\&quot;, true);\n`);\nawait driver.executeScript(`\n  let btn1 =  document.querySelector(\&quot;button[data-target=&#x27;#modalAddFrame&#x27;]\&quot;);\n  btn1.click();\n`);\nawait driver.executeScript(`\n  let addBtn = document.querySelector(\&quot;.btn.btn-success.pull-right.btn-xs\&quot;);\n  addBtn.click();\n`);\nawait driver.executeScript(`\n   let section1 = document.querySelector(\&quot;#tableModalFrames_wrapper &gt; .row:nth-child(2) [class=&#x27;col-sm-12&#x27;] #tableModalFrames tbody &gt; [role=&#x27;row&#x27;]:nth-child(1) &gt; td:nth-child(6) .form-control\&quot;)\n   let option2 = section1[1];\n   option2.setAttribute(\&quot;selected\&quot;, true);\n`);\nawait driver.executeScript(`\n  let btnPlus = document.querySelector(\&quot;#tableModalFrames_wrapper [role=&#x27;row&#x27;]:nth-of-type(1) [data-hash]\&quot;);\n  btnPlus.click();\n`);\nlet har = await defaultProxy.getHar();\nconsole.log(\&quot;Logs from browsermob:\&quot;);\nTestHelper.getRequestUrls(har.log.entries);\nassert.isOk((har.log.entries.filter(obj =&gt; {\n  return  obj.request.method === \&quot;POST\&quot; &amp;&amp; obj.request.url === \&quot;http://crm2.local/calculations\&quot;;\n})).length !== 0, \&quot;test pass POST http://crm2.local/calculations!!\&quot;);\nassert.isOk((har.log.entries.filter(obj =&gt; {\n  return  obj.request.method === \&quot;POST\&quot; &amp;&amp; obj.request.url === \&quot;http://crm2.local/calculations/triplex\&quot;;\n})).length !== 0, \&quot;test pass POST http://crm2.local/calculations/triplex!!\&quot;);\nassert.isOk((har.log.entries.filter(obj =&gt; {\n  return  obj.request.method === \&quot;POST\&quot; &amp;&amp; obj.request.url === \&quot;http://crm2.local/calculations/add/glass\&quot;;\n})).length !== 0, \&quot;test pass POST http://crm2.local/calculations/add/glass!!\&quot;);\nassert.isOk((har.log.entries.filter(obj =&gt; {\n  return  obj.request.method === \&quot;DELETE\&quot; &amp;&amp; obj.request.url === \&quot;http://crm2.local/calculations/triplex\&quot;;\n})).length !== 0, \&quot;test pass DELETE http://crm2.local/calculations/triplex!!\&quot;);\nassert.isOk((har.log.entries.filter(obj =&gt; {\n  return  obj.request.method === \&quot;DELETE\&quot; &amp;&amp; obj.request.url === \&quot;http://crm2.local/calculations/glass\&quot;;\n})).length !== 0, \&quot;test pass DELETE http://crm2.local/calculations/glass!!\&quot;);\nassert.isOk((har.log.entries.filter(obj =&gt; {\n  return  obj.request.method === \&quot;POST\&quot; &amp;&amp; obj.request.url === \&quot;http://crm2.local/calculations/add/material\&quot;;\n})).length !== 0, \&quot;test pass POST http://crm2.local/calculations/add/material!!\&quot;);&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;bfe5682d-47d1-47fa-9299-b341eecbce4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bfe5682d-47d1-47fa-9299-b341eecbce4a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17622,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:100000},&quot;copyrightYear&quot;:2018}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;crm2&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:true,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/home/user/Рабочий стол/auto-tests/crm2/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/home/user/Рабочий стол/auto-tests/crm2/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>